(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[534],{145959:(e,t,r)=>{"use strict";r.d(t,{Z:()=>b});var n=r(986069),o=r(782904),i=r(513218),a=r.n(i),l=r(227361),u=r.n(l),c=r(727418),s=r.n(c),f=r(436968),p=r.n(f);function y(e){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},y(e)}function m(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function d(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?m(Object(r),!0).forEach((function(t){g(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function g(e,t,r){return(t=function(e){var t=function(e){if("object"!=y(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=y(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==y(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var h={antiAliasing:!0,iconsWidth:24,iconsHeight:24,legendDpi:96,fontFamily:"Verdana",fontSize:8,bold:!1,italic:!1,resolution:96,name:"",description:"",outputFormat:"pdf",rotation:0},v=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("_")[0]};const b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{spec:h,capabilities:null,map:null,isLoading:!1,pdfUrl:null},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.kM:return"print"===t.control?s()({},e,{pdfUrl:null,isLoading:!1,error:null}):e;case n.qp:var r=u()(t,"capabilities.layouts",[{name:"A4"}]),i=r.filter((function(t){return v(t.name)===e.spec.sheet})).length?e.spec.sheet:v(r[0].name);return s()({},e,{capabilities:t.capabilities,spec:s()({},e.spec||{},{sheet:i,resolution:t.capabilities&&t.capabilities.dpis&&t.capabilities.dpis.length&&t.capabilities.dpis[0].value})});case n.U6:return d(d({},e),{},{spec:p()(d({},e.spec),t.name,t.value)});case n.rd:return u()(e.spec,t.name)?e:d(d({},e),{},{spec:p()(d({},e.spec),t.name,t.value)});case n.PB:var l,c,f=t.layers.map((function(e){return e.title?s()({},e,{title:a()(e.title)&&t.currentLocale&&e.title[t.currentLocale]||a()(e.title)&&e.title.default||e.title}):e}));return s()({},e,{map:{center:t.center,zoom:t.zoom,scaleZoom:t.scaleZoom,scale:t.scale,layers:f,size:null!==(l=t.size)&&void 0!==l?l:null===(c=e.map)||void 0===c?void 0:c.size,projection:t.projection},error:null});case n.HA:var y=t.zoom-e.map.scaleZoom;return s()({},e,{map:s()({},e.map,{scaleZoom:t.zoom,zoom:e.map.zoom+y,scale:t.scale})});case n.Yk:return s()({},e,{map:s()({},e.map,{size:t.size})});case n.Fp:return s()({},e,{isLoading:!0,pdfUrl:null,error:null});case n.EZ:return s()({},e,{isLoading:!1,pdfUrl:t.url,error:null});case n.WB:case n.aN:return s()({},e,{isLoading:!1,pdfUrl:null,error:t.error});case n.qH:return s()({},e,{isLoading:!1,pdfUrl:null,error:null});default:return e}}},38842:(e,t,r)=>{"use strict";r.d(t,{wk:()=>f,Yf:()=>p,c3:()=>y,fY:()=>m});var n=r(218721),o=r.n(n),i=r(227361),a=r.n(i),l=r(313311),u=r.n(l),c=r(22222),s=r(308316),f=function(e){return o()(e,"localConfig.localizedLayerStyles")},p=function(e){var t=a()(e,"localConfig.plugins.dashboard",[]),r=u()(t,(function(e){return"DashboardEditor"===e.name}))||{};return a()(r,"cfg.catalog.localizedLayerStyles",!1)},y=function(e){return a()(e,"localConfig.localizedLayerStyles.name","mapstore_language")},m=(0,c.P1)(f,y,s.KV,(function(e,t,r){var n=[];return e&&n.push({name:t,value:r}),n}))},650148:(e,t,r)=>{"use strict";r.d(t,{DX:()=>i,p6:()=>a,LI:()=>l});var n=r(727418),o=r.n(n),i=function(e){return e.print&&e.print.spec&&o()({},e.print.spec,e.print.map||{})},a=function(e){return e.print&&e.print.capabilities&&e.print.capabilities.layouts.filter((function(t){return 0===t.name.indexOf(e.print.spec.sheet)}))||[]},l=function(e){return e.print&&e.print.spec&&e.print.spec.includeLegend}},443143:(e,t,r)=>{"use strict";r.d(t,{qH:()=>s,qj:()=>f,qq:()=>p,TM:()=>y});var n,o=r(717621),i=r.n(o),a=r(14841),l=r.n(a),u=r(264721),c=r.n(u),s=function(e,t,r,o){var i=e;isNaN(parseFloat(e))&&(i=n.hexToHsv(e)[0]);var a=.5/(r-1),l=t/(r-1),u=[];1===r&&(a=.5,l=t/2);for(var c=0;c<r;c++){var s=i+c*l-t/2,f=a*c+.3,p=f;o&&(s=o.h||s,f=o.s||f,p=o.v||p),u.push(n.hsvToHex(s,f,p,c))}return u},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"red";return i()(e).toHexString()},p=function(e,t,r){var n=i()(e);return e&&n.setAlpha(l()(void 0!==t?t:n.getAlpha())).toRgbString()||r},y=function(e){var t=Math.round,r=Math.random,o=[t(255*r()),t(255*r()),t(255*r())],i=n.rgbToHex(o);if(e)for(;c()(e,i)||"#000000"===i||"#FFFFFF"===i;)y(e);return i};n={decToHex:function(e){var t="0123456789ABCDEF",r=parseInt(e,10);return r=isNaN(r)?0:r,t.charAt(((r=r>255||r<0?0:r)-r%16)/16)+t.charAt(r%16)},rgbToHex:function(e,t,r){return e instanceof Array?n.rgbToHex(e[0],e[1],e[2]):"#"+n.decToHex(e)+n.decToHex(t)+n.decToHex(r)},realToDec:function(e){return Math.min(255,Math.round(256*e))},rgbToHsv:function(e,t,r){if(e instanceof Array)return n.rgbToHsv(e[0],e[1],e[2]);var o,i,a,l,u,c=e/255,s=t/255,f=r/255;switch(o=Math.min(Math.min(c,s),f),a=(i=Math.max(Math.max(c,s),f))-o,i){case o:l=0;break;case c:l=60*(s-f)/a,s<f&&(l+=360);break;case s:l=60*(f-c)/a+120;break;case f:l=60*(c-s)/a+240}return u=0===i?0:1-o/i,[Math.round(l),u,i]},distributedColorsHEX:function(e){for(var t=360/(e-1),r=[],o=function(e,t,r){var i=o(e,t,r);return n.rgbToHex(i)},i=0;i<e;i++)r.push(o(t*i,.57,.63,i));return r},sameToneRangeColors:s,hsvToRgb:function(e,t,r){if(e instanceof Array)return n.hsvToRgb(e[0],e[1],e[2]);var o,i,a,l=Math.floor(e/60%6),u=e/60-l,c=r*(1-t),s=r*(1-u*t),f=r*(1-(1-u)*t);switch(l){case 0:o=r,i=f,a=c;break;case 1:o=s,i=r,a=c;break;case 2:o=c,i=r,a=f;break;case 3:o=c,i=s,a=r;break;case 4:o=f,i=c,a=r;break;case 5:o=r,i=c,a=s}return[n.realToDec(o),n.realToDec(i),n.realToDec(a)]},hsvToHex:function(e,t,r){var o=n.hsvToRgb(e,t,r);return n.rgbToHex(o)},hexToHsv:function(e){var t=e;if(t.length>0){"#"===t[0]&&(t=e.substring(1));var r=n.hexToRgb(t);return n.rgbToHsv(r)}return null},hexToRgb:function(e){var t,r,n,o=e;return"#"===o.charAt(0)&&(o=e.substring(1)),t=o.charAt(0)+o.charAt(1),r=o.charAt(2)+o.charAt(3),n=o.charAt(4)+o.charAt(5),[parseInt(t,16),parseInt(r,16),parseInt(n,16)]},colorToHexStr:f,colorToRgbaStr:p,generateRandomHexColor:y}},620388:(e,t,r)=>{"use strict";r.d(t,{L:()=>c});var n=r(196975),o=r(552259),i=6371008.8;function a(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i,o=e[1]*Math.PI/180,a=e[0]*Math.PI/180,l=t/n,u=Math.asin(Math.sin(o)*Math.cos(l)+Math.cos(o)*Math.sin(l)*Math.cos(r));return[180*(a+Math.atan2(Math.sin(r)*Math.sin(l)*Math.cos(o),Math.cos(l)-Math.sin(o)*Math.sin(u)))/Math.PI,180*u/Math.PI]}function l(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.sides,o=void 0===n?128:n,i=r.sphereRadius,l=[],u=0;u<o;++u)l.push(a(e,t,2*Math.PI*u/o,i));return l.push(l[0]),l}function u(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.sides,a=void 0===i?128:i,l=r.projection,u=void 0===l?"EPSG:3857":l,c=(0,n.reproject)(e,"EPSG:4326",u),s=[c.x,c.y],f=(0,n.getUnits)(u),p=t/o.Wm[f],y=2*(a+1),m=new Array(y),d=0;d<y;d+=2){m[d]=0,m[d+1]=0;for(var g=2;g<2;g++)m[d+g]=s[g]}for(var h,v,b=0;b<=a;++b){var S=2*b,O=0+2*(void 0,(v=b%(h=a))*h<0?v+h:v)*Math.PI/a;m[S]=s[0]+p*Math.cos(O),m[S+1]=s[1]+p*Math.sin(O)}for(var P=[],L=0;L<m.length-1;L++)if(L%2==0){var j=(0,n.reproject)([m[L],m[L+1]],u,"EPSG:4326");P.push([j.x,j.y])}return P}function c(e,t,r,n){return{type:"Polygon",coordinates:[(r?l:u)(e,t,n)]}}},699573:(e,t,r)=>{"use strict";r.r(t),r.d(t,{DEFAULT_PRINT_RATIO:()=>et,addMapTransformer:()=>Be,addTransformer:()=>$e,addValidator:()=>Ke,getDefaultPrintingService:()=>Qe,getGeomType:()=>we,getLayoutName:()=>Ae,getLegendIconsSize:()=>nt,getMapSize:()=>Ge,getMapTransformerChain:()=>Xe,getMapZoom:()=>ze,getMapfishLayersSpecification:()=>ot,getMapfishPrintSpecification:()=>Ie,getNearestZoom:()=>Ee,getOlDefaultStyle:()=>ft,getOpacity:()=>Te,getPrintScales:()=>ke,getPrintVendorParams:()=>rt,getResolutionMultiplier:()=>tt,getSpecTransformerChain:()=>Ye,getValidatorsChain:()=>qe,getWMTSMatrixIds:()=>at,localizationFilter:()=>Re,mapProjectionSelector:()=>De,normalizeUrl:()=>Fe,preloadData:()=>xe,resetDefaultPrintingService:()=>Je,rgbaTorgb:()=>lt,specCreators:()=>it,toAbsoluteURL:()=>Me,toMapfish:()=>Ue,toOpenLayers2Style:()=>st,toOpenLayers2TextStyle:()=>ct,wfsPreloaderFilter:()=>We});var n=r(196975),o=r(233044),i=r(552259),a=r(143378),l=r(443143),u=r(45992),c=r(218056),s=r(707294),f=r(993201),p=r(218672),y=r(701469),m=r.n(y),d=r(763105),g=r.n(d),h=r(313311),v=r.n(h),b=r(441609),S=r.n(b),O=r(14841),P=r.n(O),L=r(984596),j=r.n(L),C=r(531351),w=r.n(C),T=r(432420),x=r(253231),M=r(624262),F=r(385564),A=r.n(F),k=r(313647),E=r(830049),z=r(507122),G=r(620388);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function I(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,H(n.key),n)}}function R(e){return function(e){if(Array.isArray(e))return Z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function U(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?W(Object(r),!0).forEach((function(t){N(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):W(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function N(e,t,r){return(t=H(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H(e){var t=function(e){if("object"!=D(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=D(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(t)?t:t+""}function _(e,t){if(e){if("string"==typeof e)return Z(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var V=z.v.geojson(),Y=function(e){switch(e){case"top-left":return"lt";case"top":return"ct";case"top-right":return"rt";case"left":return"lm";case"center":default:return"cm";case"right":return"rm";case"bottom-left":return"lb";case"bottom":return"cb";case"bottom-right":return"rb"}},X=function(e,t,r){var n,o,i,a,l,u,c,s,f=void 0===r.opacity?1:r.opacity;if("Mark"===e.kind){var p=(0,E.kf)(e),y=p.width,m=p.height;return{graphicWidth:y,graphicHeight:m,externalGraphic:p.canvas.toDataURL(),graphicXOffset:-y/2,graphicYOffset:-m/2,rotation:e.rotate||0,graphicOpacity:f}}if("Icon"===e.kind){var d=(0,E.kf)(e),g=d.width,h=void 0===g?e.size:g,v=d.height,b=void 0===v?e.size:v,S=h/b,O=e.size,P=O/S;b>h&&(O=(P=e.size)*S);var L=function(e,t,r){switch(e){case"top-left":return[0,0];case"top":return[-t/2,0];case"top-right":return[-t,0];case"left":return[0,-r/2];case"center":default:return[-t/2,-r/2];case"right":return[-t,-r/2];case"bottom-left":return[0,-r];case"bottom":return[-t/2,-r];case"bottom-right":return[-t,-r]}}(e.anchor,O,P),j=(s=2,function(e){if(Array.isArray(e))return e}(c=L)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(c,s)||_(c,s)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),C=j[0],w=j[1];return{graphicWidth:O,graphicHeight:P,externalGraphic:e.image,graphicXOffset:C,graphicYOffset:w,rotation:e.rotate||0,graphicOpacity:e.opacity*f}}return"Text"===e.kind?{fontSize:e.size,fontFamily:(e.font||["TIMES_ROMAN"])[0],fontWeight:e.fontWeight,labelAlign:Y(e.anchor),labelXOffset:(null==e||null===(n=e.offset)||void 0===n?void 0:n[0])||0,labelYOffset:-((null==e||null===(o=e.offset)||void 0===o?void 0:o[1])||0),rotation:-(e.rotate||0),fontColor:e.color,fontOpacity:1*f,label:(0,E.xV)(t,e.label,""),fillOpacity:0,pointRadius:0,strokeOpacity:0,strokeWidth:0}:"Line"===e.kind?U({strokeColor:e.color,strokeOpacity:e.opacity*f,strokeWidth:e.width},e.dasharray&&{strokeDashstyle:e.dasharray.join(" ")}):"Fill"===e.kind?U(U({strokeColor:e.outlineColor,strokeOpacity:(null!==(i=e.outlineOpacity)&&void 0!==i?i:0)*f,strokeWidth:null!==(a=e.outlineWidth)&&void 0!==a?a:0},e.outlineDasharray&&{strokeDashstyle:e.outlineDasharray.join(" ")}),{},{fillColor:e.color,fillOpacity:e.fillOpacity*f}):"Circle"===e.kind?U(U({strokeColor:e.outlineColor,strokeOpacity:(null!==(l=e.outlineOpacity)&&void 0!==l?l:0)*f,strokeWidth:null!==(u=e.outlineWidth)&&void 0!==u?u:0},e.outlineDasharray&&{strokeDashstyle:e.outlineDasharray.join(" ")}),{},{fillColor:e.color,fillOpacity:e.opacity*f}):{display:"none"}},q=function(e){return function(t){var r=t.layer,n=t.spec,o=void 0===n?{projection:"EPSG:3857"}:n;if(null==r||!r.features)return[];var i=(0,k.Z)({type:"FeatureCollection",features:r.features});return A()(i.features.map((function(t){var n,i=null==e||null===(n=e.rules)||void 0===n?void 0:n.filter((function(e){return!e.filter||(0,E.NG)(t,e.filter)}));if(i.length>0){var a=t.geometry.type,l=i.reduce((function(e,t){return[].concat(R(e),R(null==t?void 0:t.symbolizers))}),[]),u=l.filter((function(e){return["Mark","Icon","Text","Model"].includes(e.kind)&&["Point"].includes(a)})),c=l.filter((function(e){return"Line"===e.kind&&["LineString"].includes(a)})),s=l.filter((function(e){return"Fill"===e.kind&&["Polygon"].includes(a)})),f=l.filter((function(e){return"Circle"===e.kind&&["Point"].includes(a)})),p=l.filter((function(e,t){return["Mark","Icon","Text","Model"].includes(e.kind)&&(["Polygon"].includes(a)||["LineString"].includes(a)||["Point"].includes(a)&&(0!==f.length||t<u.length-1))})),y=(0,E.mL)(f[f.length-1]||u[u.length-1]||c[c.length-1]||s[s.length-1],t),m=t.geometry,d=V(y);return!d||"LineString"!==a&&"Polygon"!==a||(m={type:a,coordinates:d(t)}),"Point"===a&&f.length&&(m=(0,G.L)(t.geometry.coordinates,y.radius,y.geodesic,{projection:o.projection})),[U(U({},t),{},{geometry:m,properties:U(U({},null==t?void 0:t.properties),{},{ms_style:X(y,t,r)})})].concat(R(p.map((function(e){var n=(0,E.mL)(e,t),o=V(U({msGeometry:{name:"centerPoint"}},n));if(o){var i=o(t);if(i)return U(U({},t),{},{geometry:{type:"Point",coordinates:i},properties:U(U({},null==t?void 0:t.properties),{},{ms_style:X(n,t,r)})})}return null})).filter((function(e){return!!e}))))}return[]})))}};const J=function(){return e=function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)},(t=[{key:"readStyle",value:function(){return new Promise((function(e,t){try{e(null)}catch(e){t(e)}}))}},{key:"writeStyle",value:function(e,t){return t?q(e):new Promise((function(t,r){try{t((function(t){return(0,E.vg)(e).then((function(){return q(e)(t)}))}))}catch(e){r(e)}}))}}])&&I(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,t}();var $=r(472500),B=r.n($),K=r(876825),Q=r(38842),ee=r(308316),te=r(650148),re=r(727418),ne=r.n(re),oe=r(189734),ie=r.n(oe),ae=r(91175),le=r.n(ae),ue=r(414293),ce=r.n(ue),se=r(227361),fe=r.n(se),pe=r(253632),ye=r.n(pe),me=r(984023),de=["params"];function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function he(e){return function(e){if(Array.isArray(e))return be(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ve(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ve(e,t){if(e){if("string"==typeof e)return be(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?be(e,t):void 0}}function be(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function Se(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function Oe(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(r),!0).forEach((function(t){Pe(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Se(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function Pe(e,t,r){return(t=function(e){var t=function(e){if("object"!=ge(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var r=t.call(e,"string");if("object"!=ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==ge(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Le,je=(0,i.Z5)(0,21),Ce=new J,we=function(e){return e.features&&e.features[0]&&e.features[0].geometry?e.features[0].geometry.type:e.features&&e.features[0].features&&e.features[0].style&&e.features[0].style.type?e.features[0].style.type:void 0},Te=function(e){return e.opacity||(0===e.opacity?0:1)},xe=function(e){var t=g()(e.layers,{type:"wfs"});return t.length>0?Promise.all(t.map((function(t){return(0,T.Bm)(t.url,t.name,Oe({outputFormat:"application/json",srsName:e.projection},(0,a.v)(t)||{})).then((function(e){var r=e.data;return{id:t.id,geoJson:r}}))}))).then((function(t){return Oe(Oe({},e),{},{layers:(e.layers||[]).map((function(e){var r=v()(t,{id:e.id});return"wfs"===e.type&&r?Oe(Oe({},e),r):e}))})})):Promise.resolve(e)},Me=function(e,t){return-1!==e.search(/^\/\//)?window.location.protocol+e:-1!==e.search(/:\/\//)?e:-1!==e.search(/^\//)?(t||window.location.origin)+e:e},Fe=function(e){var t=m()(e)?e[0]:e;return-1!==t.indexOf("?")&&(t=t.substring(0,t.indexOf("?"))),Le.toAbsoluteURL(t)},Ae=function(e){var t=[e.sheet];return e.includeLegend?e.twoPages&&t.push("2_pages_legend"):t.push("no_legend"),e.landscape&&t.push("landscape"),t.join("_")},ke=function(e){return e.scales.slice(0).reverse().map((function(e){return parseFloat(e.value)}))||[]},Ee=function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:je)[Math.round(e)];return t.reduce((function(e,t,n){return t<r?e:n}),0)},ze=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:je,n=t[Math.round(e)];return r.reduce((function(e,t,r){return t<n?e:r}),0)+1},Ge=function(e,t){if(e){var r=e.rotation?e.map.height:e.map.width;return{width:t,height:(e.rotation?e.map.width:e.map.height)/r*t}}return{width:100,height:100}},De=function(e){var t,r,n;return null!==(t=null==e||null===(r=e.print)||void 0===r||null===(n=r.map)||void 0===n?void 0:n.projection)&&void 0!==t?t:"EPSG:3857"},Ie=function(e,t){var r=e.params,o=Oe(Oe({},function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)r=i[n],t.includes(r)||{}.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,de)),r),a=De(t),l=(0,n.reproject)(o.center,"EPSG:4326",o.projection),u=Math.round((0,i.CT)(o.scaleZoom,a,o.projection)),c=(o.scales||(0,i.yu)(o.projection))[u]||je[u],s=Oe(Oe({},o),{},{center:l,scaleZoom:u});return Oe({units:(0,n.getUnits)(o.projection),srs:(0,n.normalizeSRS)(o.projection||"EPSG:3857"),layout:Le.getLayoutName(s),dpi:parseInt(o.resolution,10),outputFilename:"mapstore-print",geodetic:!1,mapTitle:o.name||"",comment:o.description||"",layers:Le.getMapfishLayersSpecification(o.layers,s,t,"map"),pages:[{center:[l.x,l.y],scale:c,rotation:ce()(o.rotation)?0:-Number(o.rotation)}],legends:Le.getMapfishLayersSpecification(o.layers,s,t,"legend")},r)},Re=function(e,t){var r=(0,Q.wk)(e),n=(0,Q.fY)(e),o=r?Oe(Oe({},t),{},{env:n,currentLanguage:(0,ee.KV)(e)}):t;return Promise.resolve(o)},We=function(e,t){return xe(t)},Ue=function(e,t){return Promise.resolve(Ie(t,e))},Ne=[{name:"localization",transformer:Re},{name:"wfspreloader",transformer:We},{name:"mapfishSpecCreator",transformer:Ue}],He=[],_e=[],Ze=[];function Ve(e,t){return t.reduce((function(e,t){return-1===e.findIndex((function(e){return e.name===t.name}))?[].concat(he(e),[t]):e.map((function(e){return e.name===t.name?t:e}))}),e)}function Ye(){var e=Ne.length;return ie()(Ve(Ne.map((function(e,t){return Oe(Oe({},e),{},{position:t})})),He.map((function(t,r){var n;return Oe(Oe({},t),{},{position:null!==(n=t.position)&&void 0!==n?n:r+e})}))),["position"])}function Xe(){return _e}function qe(){return Ze}function Je(){He=[],_e=[],Ze=[]}function $e(e,t,r){He=Ve(He,[{name:e,transformer:t,position:r}])}function Be(e,t){_e=Ve(_e,[{name:e,transformer:t}])}function Ke(e,t,r){Ze=[{id:e,name:t,validator:r}].reduce((function(e,t){return-1===e.findIndex((function(e){return e.id===t.id}))?[].concat(he(e),[t]):e.map((function(e){return e.id===t.id?t:e}))}),Ze)}var Qe=function(){return{print:function(e){var t=(0,K.bh)().getState(),r=(0,te.DX)(t),n=e?Oe(Oe({},r),e):r;return Ye().map((function(e){return e.transformer})).reduce((function(e,r){return e.then((function(e){return r(t,e)}))}),Promise.resolve(n))},validate:function(){var e=(0,K.bh)().getState();return qe().reduce((function(t,r){var n,o=null!==(n=t[r.name])&&void 0!==n?n:{valid:!0,errors:[]},i=r.validator(e,o);return Oe(Oe({},t),{},Pe({},r.name,{valid:o.valid&&i.valid,errors:[].concat(he(o.errors),he(i.errors||[]))}))}),{})},getMapConfiguration:function(){var e,t=(0,K.bh)().getState();return Xe().map((function(e){return e.transformer})).reduce((function(e,r){return r(t,e)}),(null==t||null===(e=t.print)||void 0===e?void 0:e.map)||{})}}},et=96/72;function tt(e,t){return e/t*(arguments.length>2&&void 0!==arguments[2]?arguments[2]:et)}var rt=function(e){return(null==e?void 0:e.serverType)===M.z$.NO_VENDOR?{}:{TILED:!0}},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=e.forceIconsSize||"background"===t.group,n=r?e.iconsWidth:fe()(t,"legendOptions.legendWidth",12),o=r?e.iconsHeight:fe()(t,"legendOptions.legendHeight",12);return{width:n,height:o,minSymbolSize:ye()([n,o])}},ot=function(e,t,r,n){return e.filter((function(e){return Le.specCreators[e.type]&&Le.specCreators[e.type][n]})).map((function(e){return Le.specCreators[e.type][n](e,t,r)}))},it={wms:{map:function(e,t){return{baseURL:Le.normalizeUrl(e.url)+"?",opacity:Te(e),singleTile:!1,type:"WMS",layers:[e.name],format:e.format||"image/png",styles:[e.style||""],customParams:(0,o.addAuthenticationParameter)(Le.normalizeUrl(e.url),ne()(Oe(Oe({TRANSPARENT:!0},rt(e)),{},{EXCEPTIONS:"application/vnd.ogc.se_inimage",scaleMethod:"accurate",ENV:(0,x.h)(t.env)}),e.baseParams||{},e.params||{},Oe({},(0,a.v)({layerFilter:e.layerFilter,filterObj:e.filterObj}))))}},legend:function(e,t){return{name:e.title||e.name,classes:[{name:"",icons:[Le.normalizeUrl(e.url)+B().format({query:(0,o.addAuthenticationParameter)(Le.normalizeUrl(e.url),Oe(Oe({TRANSPARENT:!0,EXCEPTIONS:"application/vnd.ogc.se_xml",VERSION:"1.1.1",SERVICE:"WMS",REQUEST:"GetLegendGraphic",LAYER:e.name,LANGUAGE:t.language||"",STYLE:e.style||"",SCALE:t.scale},nt(t,e)),{},{LEGEND_OPTIONS:"forceLabels:"+(t.forceLabels?"on":"")+";fontAntialiasing:"+t.antiAliasing+";dpi:"+t.legendDpi+";fontStyle:"+((t.bold?"bold":t.italic&&"italic")||"")+";fontName:"+t.fontFamily+";fontSize:"+t.fontSize,format:"image/png"},ne()({},e.params)))})]}]}}},vector:{map:function(e,t){var r,o;return{type:"Vector",name:e.name,opacity:Te(e),styleProperty:"ms_style",styles:{1:Le.toOpenLayers2Style(e,e.style),Polygon:Le.toOpenLayers2Style(e,e.style,"Polygon"),LineString:Le.toOpenLayers2Style(e,e.style,"LineString"),Point:Le.toOpenLayers2Style(e,e.style,"Point"),FeatureCollection:Le.toOpenLayers2Style(e,e.style,"FeatureCollection")},geoJson:(0,n.reprojectGeoJson)({type:"FeatureCollection",features:"geostyler"===(null==e||null===(r=e.style)||void 0===r?void 0:r.format)&&null!=e&&null!==(o=e.style)&&void 0!==o&&o.body?Ce.writeStyle(e.style.body,!0)({layer:e,spec:t}):e.features.map((function(e){return Oe(Oe({},e),{},{properties:Oe(Oe({},e.properties),{},{ms_style:e&&e.geometry&&e.geometry.type&&e.geometry.type.replace("Multi","")||1})})}))},"EPSG:4326",t.projection)}}},graticule:{map:function(e,t,r){var n,o,a,l,u,c=le()(null==r||null===(n=r.print)||void 0===n?void 0:n.capabilities.layouts.filter((function(e){return e.name===Ae(t)}))),s=null!==(o=tt(null==c||null===(a=c.map)||void 0===a?void 0:a.width,null!==(l=null===(u=t.size)||void 0===u?void 0:u.width)&&void 0!==l?l:370))&&void 0!==o?o:1,f=(0,i.E_)(t.projection).map((function(e){return e*s})),p=f[t.scaleZoom];return{type:"Vector",name:e.name||"graticule",opacity:Te(e),styleProperty:"ms_style",styles:{lines:Le.toOpenLayers2Style(e,e.style,"GraticuleLines"),xlabels:Le.toOpenLayers2TextStyle(e,e.labelXStyle,"GraticuleXLabels"),ylabels:Le.toOpenLayers2TextStyle(e,e.labelYStyle,"GraticuleYLabels"),frame:Le.toOpenLayers2Style(e,e.frameStyle,"GraticuleFrame")},geoJson:(0,me.XA)({resolutions:f,mapProjection:t.projection,gridProjection:e.srs||t.projection,extent:(0,i.cr)(t.center,p,t.size,t.projection),zoom:t.scaleZoom,withLabels:!0,xLabelFormatter:e.xLabelFormatter,yLabelFormatter:e.yLabelFormatter,xLabelStyle:Le.toOpenLayers2TextStyle(e,e.labelXStyle,"GraticuleXLabels"),yLabelStyle:Le.toOpenLayers2TextStyle(e,e.labelYStyle,"GraticuleYLabels"),frameSize:e.frameRatio})}}},wfs:{map:function(e){var t,r;return{type:"Vector",name:e.name,opacity:Te(e),styleProperty:"ms_style",styles:{1:Le.toOpenLayers2Style(e,e.style),Polygon:Le.toOpenLayers2Style(e,e.style,"Polygon"),LineString:Le.toOpenLayers2Style(e,e.style,"LineString"),Point:Le.toOpenLayers2Style(e,e.style,"Point"),FeatureCollection:Le.toOpenLayers2Style(e,e.style,"FeatureCollection")},geoJson:e.geoJson&&{type:"FeatureCollection",features:"geostyler"===(null==e||null===(t=e.style)||void 0===t?void 0:t.format)&&null!=e&&null!==(r=e.style)&&void 0!==r&&r.body?Ce.writeStyle(e.style.body,!0)({layer:Oe(Oe({},e),{},{features:e.geoJson.features})}):e.geoJson.features.map((function(e){return Oe(Oe({},e),{},{properties:Oe(Oe({},e.properties),{},{ms_style:e&&e.geometry&&e.geometry.type&&e.geometry.type.replace("Multi","")||1})})}))}}}},osm:{map:function(){return{baseURL:"http://a.tile.openstreetmap.org/",opacity:Te(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),singleTile:!1,type:"OSM",maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],tileSize:[256,256],extension:"png",resolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135]}}},mapquest:{map:function(){return{baseURL:"http://otile1.mqcdn.com/tiles/1.0.0/map/",opacity:Te(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),singleTile:!1,type:"OSM",maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],tileSize:[256,256],extension:"png",resolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135]}}},wmts:{map:function(e,t){var r=t.projection,n=(0,s.h7)(e,r),i=n.tileMatrixSet,a=n.tileMatrixSetName;if(!i)throw Error("tile matrix not found for pdf EPSG"+r);var l=Le.getWMTSMatrixIds(e,i),u=Le.normalizeUrl(j()(e.url)[0]),c={};return u.indexOf("{Style}")>=0&&(c={dimensions:["Style"],params:{STYLE:e.style}}),Oe(Oe({baseURL:encodeURI(u),format:e.format||"image/png",type:"WMTS",layer:e.name,"customParams ":(0,o.addAuthenticationParameter)(e.capabilitiesURL,ne()({TRANSPARENT:!0}))},c),{},{matrixIds:l,matrixSet:a,style:e.style,name:e.name,requestEncoding:"RESTful"===e.requestEncoding?"REST":e.requestEncoding||"KVP",opacity:Te(e),version:e.version||"1.0.0"})}},tileprovider:{map:function(e){var t,r,n=(t=(0,u.h)(e.provider,e),r=2,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(t,r)||ve(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=n[0],i=n[1];if(!S()(i)){var a,l=(0,c.ut)(Oe(Oe({},i),{},{url:null!==(a=null==i?void 0:i.url)&&void 0!==a?a:o}));if(!l)throw Error("No base URL found for this layer");var s=l.indexOf("?"),f=l.indexOf("{"),p=l.slice(0,f),y=s<0?l.slice(f):l.slice(f,s);return{baseURL:p,path_format:y.replace("{x}","${x}").replace("{y}","${y}").replace("{z}","${z}"),type:"xyz",extension:y.split(".").pop()||"png",opacity:Te(e),tileSize:[256,256],maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],resolutions:[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135].filter((function(e,t){var r=!0;return i.maxNativeZoom&&(r=r&&t<=i.maxNativeZoom),r})),customParams:Object.fromEntries(new URL(l).searchParams)}}return{}}},tms:{map:function(e){var t=e.tileMapUrl.split(e.tileMapService+"/")[1];return{type:"tms",opacity:Te(e),layer:t,baseURL:e.tileMapService.substring(0,e.tileMapService.lastIndexOf("/1.0.0")),tileSize:e.tileSize,format:(0,f.A)(e.tileMapUrl),maxExtent:[-20037508.3392,-20037508.3392,20037508.3392,20037508.3392],resolutions:e.tileSets.map((function(e){return e.resolution}))}}}},at=function(e,t){var r=[],o=(0,n.normalizeSRS)(e.srs||"EPSG:3857",e.allowedSRS),i=(0,p.U2)(o).getMetersPerUnit();return t&&t.TileMatrix.map((function(e){var t=e["ows:Identifier"],n=28e-5*e.ScaleDenominator/i,o=[P()(e.TileWidth),P()(e.TileHeight)],a=e.TopLeftCorner&&e.TopLeftCorner.split(" ").map((function(e){return P()(e)})),l=[P()(e.MatrixWidth),P()(e.MatrixHeight)];return r.push({identifier:t,matrixSize:l,resolution:n,tileSize:o,topLeftCorner:a})})),r},lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return-1!==e.indexOf("rgba")?"rgb".concat(e.slice(e.indexOf("("),e.lastIndexOf(",")),")"):e};function ut(e,t){return["start"===e?"l":"end"===e?"r":"c","top"===t?"t":"bottom"===t?"b":"m"].join("")}var ct=function(e,t,r){if(!t)return Le.getOlDefaultStyle(e,r);switch(r){case"GraticuleXLabels":return{fontColor:t.color||"#000000",fontFamily:t.font||"12px Calibri,sans-serif",fontWeight:t.fontWeight||"bold",fontSize:t.fontSize||"14",label:"{properties.valueText}",labelAlign:ut(t.textAlign||"center",t.verticalAlign||"bottom"),labelOutlineColor:t.labelOutlineColor||"#FFFFFF",labelOutlineWidth:t.labelOutlineWidth/4||.5,rotation:t.rotation?-t.rotation:0};case"GraticuleYLabels":return{fontColor:t.color||"#000000",fontFamily:t.font||"12px Calibri,sans-serif",fontWeight:t.fontWeight||"bold",fontSize:t.fontSize||"14",label:"{properties.valueText}",labelAlign:ut(t.textAlign||"end",t.verticalAlign||"middle"),labelOutlineColor:t.labelOutlineColor||"#FFFFFF",labelOutlineWidth:t.labelOutlineWidth/4||.5,rotation:t.rotation?-t.rotation:0};default:return{fontColor:"#000000",fontFamily:"12px Calibri,sans-serif",fontWeight:"bold",fontSize:"14",label:"{properties.valueText}",labelAlign:"cb",labelOutlineColor:"#FFFFFF",labelOutlineWidth:.5}}},st=function(e,t,r){return t&&"marker"!==e.styleName?{fillColor:(0,l.qj)(t.fillColor),fillOpacity:t.fillOpacity,externalGraphic:t.iconUrl,pointRadius:t.radius,strokeColor:(0,l.qj)(t.color),strokeOpacity:t.opacity,strokeWidth:t.weight,strokeDashstyle:t.lineDash?w()(t.lineDash).join(" "):void 0}:Le.getOlDefaultStyle(e,r)},ft=function(e,t){switch(t||we(e)||""){case"Polygon":case"MultiPolygon":return{fillColor:"#0000FF",fillOpacity:.1,strokeColor:"#0000FF",strokeOpacity:1,strokeWidth:3,strokeDashstyle:"dash",strokeLinecap:"round"};case"MultiLineString":case"LineString":return{strokeColor:"#0000FF",strokeOpacity:1,strokeWidth:3};case"Point":case"MultiPoint":return"marker"===e.styleName?{externalGraphic:"http://cdnjs.cloudflare.com/ajax/libs/leaflet/0.7.3/images/marker-icon.png",graphicWidth:25,graphicHeight:41,graphicXOffset:-12,graphicYOffset:-41}:{fillColor:"#FF0000",fillOpacity:0,strokeColor:"#FF0000",pointRadius:5,strokeOpacity:1,strokeWidth:1};case"GraticuleLines":return{strokeColor:"#ff7800",strokeOpacity:.9,strokeWidth:2,strokeDashstyle:"4 0.5"};case"GraticuleFrame":return{strokeColor:"#000000",strokeOpacity:1,strokeWidth:1,fillColor:"#FFFFFF",fillOpacity:1};case"GraticuleXLabels":return{fontColor:"#000000",fontFamily:"12px Calibri,sans-serif",fontWeight:"bold",fontSize:"14",label:"{properties.valueText}",labelAlign:"cb",labelOutlineColor:"#FFFFFF",labelOutlineWidth:.5};case"GraticuleYLabels":return{fontColor:"#000000",fontFamily:"12px Calibri,sans-serif",fontWeight:"bold",fontSize:"14",label:"{properties.valueText}",labelAlign:"rm",labelOutlineColor:"#FFFFFF",labelOutlineWidth:.5};default:return{fillColor:"#0000FF",fillOpacity:.1,strokeColor:"#0000FF",pointRadius:5,strokeOpacity:1,strokeWidth:1}}};Le={toAbsoluteURL:Me,getLayoutName:Ae,getMapfishLayersSpecification:ot,specCreators:it,normalizeUrl:Fe,toOpenLayers2Style:st,toOpenLayers2TextStyle:ct,getWMTSMatrixIds:at,getOlDefaultStyle:ft}},993201:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var n=r(264721),o=r.n(n),i=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").split("?")[0].split("@");if(e.length>1){var t=e[e.length-1];if(o()(["png","png8","jpeg","vnd.jpeg-png","gif"],t))return t}return null}},507122:(e,t,r)=>{"use strict";r.d(t,{v:()=>s});var n=r(664632),o=r(894417),i=r(185447),a=r(196975);function l(e,t){if(e){if("string"==typeof e)return u(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?u(e,t):void 0}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}var c=function(e){return["centerPoint","lineToArc","startPoint","endPoint"].includes(null==e?void 0:e.name)},s={cesium:function(e){var t=e.Cesium,r=function(e){if(null!=e&&e.positions)return{type:e.geometry.type,positions:null==e?void 0:e.positions[0]};var r=("Polygon"===e.geometry.type?e.geometry.coordinates[0]:e.geometry.coordinates).map((function(e){return t.Cartesian3.fromDegrees(e[0],e[1],e[2])}));return{type:e.geometry.type,positions:r}},n={centerPoint:function(e){var n,o=r(e),a=o.positions,c=o.type,s=a.map((function(e){var r=t.Cartographic.fromCartesian(e),n=r.longitude,o=r.latitude,i=r.height;return[t.Math.toDegrees(n),t.Math.toDegrees(o),i]}));if("LineString"===c){var f=a.reduce((function(e,r,n){return a[n+1]?e+t.Cartesian3.distance(r,a[n+1]):e}),0)/2,p=s.map((function(e,r){var n=a.filter((function(e,t){return t<r+1}));return[e[0],e[1],e[2],n.reduce((function(e,r,o){return n[o+1]?e+t.Cartesian3.distance(r,n[o+1]):e}),0)]})),y=p.find((function(e){return e[3]>f})),m=p.indexOf(y)-1,d=p[m],g=f-d[3],h=t.Cartographic.toCartesian(t.Cartographic.fromDegrees(d[0],d[1],d[2])),v=t.Cartesian3.normalize(t.Cartesian3.subtract(t.Cartographic.toCartesian(t.Cartographic.fromDegrees(y[0],y[1],y[2])),h,new t.Cartesian3),new t.Cartesian3);return{position:t.Cartesian3.add(h,t.Cartesian3.multiplyByScalar(v,g,new t.Cartesian3),new t.Cartesian3)}}var b,S=((0,i.Z)({type:"Polygon",coordinates:[[].concat((b=s,function(e){if(Array.isArray(e))return u(e)}(b)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(b)||l(b)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),[s[0]])]})||{}).geometry,O=s.reduce((function(e,t){return e+function(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i,a,l=[],u=!0,c=!1;try{if(i=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;u=!1}else for(;!(u=(n=i.call(r)).done)&&(l.push(n.value),l.length!==t);u=!0);}catch(e){c=!0,o=e}finally{try{if(!u&&null!=r.return&&(a=r.return(),Object(a)!==a))return}finally{if(c)throw o}}return l}}(e,t)||l(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}(t,3)[2]}),0)/s.length,P=[S.coordinates[0],S.coordinates[1],O]||0;return{position:t.Cartographic.toCartesian((n=t.Cartographic).fromDegrees.apply(n,P))}},lineToArc:function(){return{arcType:t.ArcType.GEODESIC,perPositionHeight:void 0}},startPoint:function(e){return{position:r(e).positions[0].clone()}},endPoint:function(e){var t=r(e).positions;return{position:t["Polygon"===e.geometry.type?t.length-2:t.length-1].clone()}}};return function(e){var t=e.msGeometry;return c(t)&&n[null==t?void 0:t.name]?n[t.name]:null}},openlayers:function(e){var t=e.Point,r=e.LineString,i=e.Polygon,l=e.GeoJSON,u=e.getCenter,s=new l,f={centerPoint:function(e){return function(r){var i=r.getGeometry().getType();if(["Point","MultiPoint"].includes(i))return r.getGeometry();var l=e?e.getView().getProjection().getCode():"EPSG:3857",c=r.getGeometry();if(["LineString"].includes(i)){var f=JSON.parse(s.writeFeature(r,{dataProjection:"EPSG:4326",featureProjection:l})),p=(0,n.Z)(f)/2,y=(0,o.Z)(f,p),m=(0,a.reproject)(y.geometry.coordinates,"EPSG:4326",l);return new t([m.x,m.y])}var d=c.getExtent(),g=u(d);return new t(g)}},lineToArc:function(e){return function(t){var n=e?e.getView().getProjection().getCode():"EPSG:3857",o=t.getGeometry().getType();if("LineString"===o||"MultiPoint"===o){var l=t.getGeometry().getCoordinates();return l=(0,a.transformLineToArcs)(l.map((function(e){var t=(0,a.reproject)(e,n,"EPSG:4326");return[t.x,t.y]}))),new r(l.map((function(e){var t=(0,a.reproject)(e,"EPSG:4326",n);return[t.x,t.y]})))}if("Polygon"===o){var u=t.getGeometry().getCoordinates()[0];return u=(0,a.transformLineToArcs)(u.map((function(e){var t=(0,a.reproject)(e,n,"EPSG:4326");return[t.x,t.y]}))),new i([u.map((function(e){var t=(0,a.reproject)(e,"EPSG:4326",n);return[t.x,t.y]}))])}return t.getGeometry()}},startPoint:function(){return function(e){var r=e.getGeometry(),n=r.getType();if(["Point","MultiPoint"].includes(n))return e.getGeometry();var o="Polygon"===n?r.getCoordinates()[0]:r.getCoordinates();return o.length>1?new t(o[0]):null}},endPoint:function(){return function(e){var r=e.getGeometry(),n=r.getType();if(["Point","MultiPoint"].includes(n))return e.getGeometry();var o="Polygon"===n?r.getCoordinates()[0]:r.getCoordinates();return new t(o.length>3?o[o.length-("Polygon"===n?2:1)]:o[o.length-1])}}};return function(e,t,r){var n,o=e.msGeometry;if(c(o)&&f[null==o?void 0:o.name])return{geometry:f[o.name](r)};var i=(null==t?void 0:t.getGeometry)&&(null==t||null===(n=t.getGeometry())||void 0===n?void 0:n.getType());return["Mark","Icon"].includes(e.kind)&&["LineString","MultiLineString","Polygon","MultiPolygon"].includes(i)?{geometry:f.centerPoint(r)}:null}},geojson:function(){var e={centerPoint:function(e){if(["LineString"].includes(e.geometry.type)){var t=(0,n.Z)(e)/2;return(0,o.Z)(e,t).geometry.coordinates}return(0,i.Z)(e).geometry.coordinates},lineToArc:function(e){return"LineString"===e.geometry.type?(0,a.transformLineToArcs)(e.geometry.coordinates):"Polygon"===e.geometry.type?e.geometry.coordinates.map(a.transformLineToArcs):null},startPoint:function(e){return"Polygon"===e.geometry.type?e.geometry.coordinates[0][0]:"LineString"===e.geometry.type?e.geometry.coordinates[0]:null},endPoint:function(e){return"Polygon"===e.geometry.type?e.geometry.coordinates[0][e.geometry.coordinates[0].length-2]:"LineString"===e.geometry.type?e.geometry.coordinates[e.geometry.coordinates.length-1]:null}};return function(t){var r=t.msGeometry;return c(r)&&e[null==r?void 0:r.name]?e[r.name]:null}}}}}]);