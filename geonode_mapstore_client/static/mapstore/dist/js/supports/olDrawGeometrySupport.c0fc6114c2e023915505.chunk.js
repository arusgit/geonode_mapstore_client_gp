(self.webpackChunkgeonode_mapstore_client=self.webpackChunkgeonode_mapstore_client||[]).push([[39547],{65433:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>V});var n=t(621413),o=t(372445),i=t(973410),a=t(473392),u=t(169141),l=t(15265),c=t(752043),s=t(944538),d=t(869669),f=t(870295),y=t(218672),p=t(623068),v=t(690728),g=t(831219),w=t(409371),m=t(898185),h=t(120767),b=t(717621),P=t.n(b),S=t(436403),j=t(196975),O=t(854788);function D(e){return D="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},D(e)}function C(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function Z(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?C(Object(t),!0).forEach((function(r){E(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):C(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function E(e,r,t){return(r=L(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function _(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,L(n.key),n)}}function L(e){var r=function(e){if("object"!=D(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=D(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==D(r)?r:r+""}function A(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return k(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?k(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}var G=new u.Z,F={Circle:function(e){var r=e.map,t=e.onDrawing;return function(e,n,o){var i=n;i||(i=new l.ZP([])).set("@geometry",new c.Z([]));var a=o?o.getCode():r.getView().getProjection().getCode(),u=(0,y.vs)(e[0],a,"EPSG:4326"),s=(0,y.vs)(e[1],a,"EPSG:4326"),d=(0,f.Sp)(u,s),p=(0,l.iu)(u,d,128);return p.transform("EPSG:4326",a),i.setCoordinates(p.getCoordinates()),i.get("@geometry").setCoordinates(e[0]),i.set("@properties",{radius:d,geodesic:!0}),t({coordinates:A(e)}),i}},LineString:function(e){var r=e.map,t=e.onDrawing;return function(e,n,o){var i=n;i||(i=new s.Z([])).set("@geometry",new s.Z([]));var a=o?o.getCode():r.getView().getProjection().getCode(),u=(0,j.transformLineToArcs)(e.map((function(e){var r=(0,j.reproject)(e,a,"EPSG:4326");return[r.x,r.y]})));return i.setCoordinates(u.map((function(e){var r=(0,j.reproject)(e,"EPSG:4326",a);return[r.x,r.y]}))),i.get("@geometry").setCoordinates(e),i.set("@properties",{geodesic:!0}),t({coordinates:A(e)}),i}},Polygon:function(e){var r=e.map,t=e.onDrawing;return function(e,n,o){var i=n;i||(i=new l.ZP([])).set("@geometry",new l.ZP([]));var a=o?o.getCode():r.getView().getProjection().getCode(),u=e[0].length?[[].concat(A(e[0]),[e[0][0]])]:[],c=(0,j.transformLineToArcs)(u[0].map((function(e){var r=(0,j.reproject)(e,a,"EPSG:4326");return[r.x,r.y]})));return i.setCoordinates([c.map((function(e){var r=(0,j.reproject)(e,"EPSG:4326",a);return[r.x,r.y]}))]),i.get("@geometry").setCoordinates(u),i.set("@properties",{geodesic:!0}),t({coordinates:[].concat(u)}),i}}},T={Point:function(e){var r=e.onDrawing;return function(e,t){var n=t;return n||(n=new c.Z([])),n.setCoordinates(e),r({coordinates:A(e)}),n}},Circle:function(e){var r=e.onDrawing;return function(e,t){var n=t;n||(n=new d.Z([])).set("@geometry",new c.Z([]));var o=(0,v.bI)(e[0],e[1]),i=Math.sqrt(o);return n.setCenterAndRadius(e[0],i),n.get("@geometry").setCoordinates(e[0]),n.set("@properties",{radius:i}),r({coordinates:A(e)}),n}},LineString:function(e){var r=e.onDrawing;return function(e,t){var n=t;return n||(n=new s.Z([])),n.setCoordinates(e),r({coordinates:A(e)}),n}},Polygon:function(e){var r=e.onDrawing;return function(e,t){var n=t;n||(n=new l.ZP([]));var o=e[0].length?[[].concat(A(e[0]),[e[0][0]])]:[];return n.setCoordinates(o),r({coordinates:[].concat(o)}),n}}};function I(e,r){if(void 0===r)return e;var t=P()(e).toRgb(),n=t.r,o=t.g,i=t.b;return"rgba(".concat([n,o,i,r].join(", "),")")}const x=function(){return e=function e(){var r=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e);var n=t.type,u=t.coordinatesLength,l=!!t.geodesic,c=t.onDrawStart?t.onDrawStart:function(){},s=t.onDrawing?t.onDrawing:function(){},d=t.onDrawEnd?t.onDrawEnd:function(){};this._map=t.map;var f=(0,O.E4)(t.style),y=new i.Z({wrapX:!1});this._layer=new a.Z({source:y,zIndex:1/0,style:function(e){var r,t,n,o,i,a,u,l,c,s,d=e.getGeometry().getType(),y=new h.Z(Z({color:I(null==f||null===(r=f.line)||void 0===r?void 0:r.color,null==f||null===(t=f.line)||void 0===t?void 0:t.opacity),width:null==f||null===(n=f.line)||void 0===n?void 0:n.width},(null==f||null===(o=f.line)||void 0===o?void 0:o.dashLength)&&{lineDash:[f.line.dashLength,f.line.dashLength]})),p=new m.Z({color:I(null==f||null===(i=f.area)||void 0===i?void 0:i.color,null==f||null===(a=f.area)||void 0===a?void 0:a.opacity)});return"Point"===d?new g.ZP({image:new w.Z({stroke:new h.Z({color:I(null==f||null===(u=f.coordinatesNode)||void 0===u?void 0:u.color,null==f||null===(l=f.coordinatesNode)||void 0===l?void 0:l.opacity),width:null==f||null===(c=f.coordinatesNode)||void 0===c?void 0:c.width}),radius:null==f||null===(s=f.coordinatesNode)||void 0===s?void 0:s.radius})}):"LineString"===d?new g.ZP({stroke:y}):new g.ZP({stroke:y,fill:p})}});var v=l&&F[n]?F[n]:T[n];this._draw=new o.ZP({source:y,type:n,maxPoints:u,stopClick:!0,freehandCondition:S.Fi,geometryFunction:v?v({map:this._map,onDrawing:s}):void 0,style:function(e){var r,t,o,i,a,u,l,c,s,d,y=e.getGeometry().getType(),p=new h.Z(Z({color:I(null==f||null===(r=f.lineDrawing)||void 0===r?void 0:r.color,null==f||null===(t=f.lineDrawing)||void 0===t?void 0:t.opacity),width:null==f||null===(o=f.lineDrawing)||void 0===o?void 0:o.width},(null==f||null===(i=f.lineDrawing)||void 0===i?void 0:i.dashLength)&&{lineDash:[f.lineDrawing.dashLength,f.lineDrawing.dashLength]})),v=new m.Z({color:I(null==f||null===(a=f.areaDrawing)||void 0===a?void 0:a.color,null==f||null===(u=f.areaDrawing)||void 0===u?void 0:u.opacity)});return"Point"===y?new g.ZP({image:new w.Z({stroke:new h.Z({color:I(null==f||null===(l=f.cursor)||void 0===l?void 0:l.color,null==f||null===(c=f.cursor)||void 0===c?void 0:c.opacity),width:null==f||null===(s=f.cursor)||void 0===s?void 0:s.width}),radius:null==f||null===(d=f.cursor)||void 0===d?void 0:d.radius})}):"LineString"===y&&"LineString"===n?new g.ZP({stroke:p}):"Polygon"===y&&["Polygon","Circle"].includes(n)||"Circle"===y?new g.ZP({stroke:p,fill:v}):null}}),this._draw.on("drawstart",(function(){c()})),this._draw.on("drawend",(function(e){var t=e.feature.getGeometry().get("@properties")||{geodesic:l},n=e.feature.getGeometry().get("@geometry")?new p.Z({geometry:e.feature.getGeometry().get("@geometry")}):e.feature;d({feature:Z(Z({},G.writeFeatureObject(n,{featureProjection:r._map.getView().getProjection().getCode(),dataProjection:"EPSG:4326"})),{},{properties:t})})})),this._map.addInteraction(this._draw),this._map.addLayer(this._layer)},(r=[{key:"getCoordinates",value:function(){return[]}},{key:"remove",value:function(){this._draw&&(this._map.removeInteraction(this._draw),this._draw=null),this._layer&&(this._map.removeLayer(this._layer),this._layer=null)}}])&&_(e.prototype,r),Object.defineProperty(e,"prototype",{writable:!1}),e;var e,r}();function N(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}const V=function(e){var r=e.map,t=e.active,o=e.geometryType,i=void 0===o?"LineString":o,a=e.geodesic,u=void 0!==a&&a,l=e.onDrawStart,c=void 0===l?function(){}:l,s=e.onDrawing,d=void 0===s?function(){}:s,f=e.onDrawEnd,y=void 0===f?function(){}:f,p=e.onInit,v=void 0===p?function(){}:p,g=e.onDestroy,w=void 0===g?function(){}:g,m=e.coordinatesLength,h=e.style,b=(0,n.useRef)();return(0,n.useEffect)((function(){return r&&t&&(v(),b.current=new x({map:r,type:i,coordinatesLength:m,style:h,geodesic:u,onDrawStart:c,onDrawing:d,onDrawEnd:y})),function(){var e;b.current&&(w({coordinates:(e=b.current.getCoordinates(),function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,r){if(e){if("string"==typeof e)return N(e,r);var t={}.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?N(e,r):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}),b.current.remove(),b.current=null)}}),[r,t,i,m,u]),null}},854788:(e,r,t)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function o(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?o(Object(t),!0).forEach((function(r){a(e,r,t[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}))}return e}function a(e,r,t){return(r=function(e){var r=function(e){if("object"!=n(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var t=r.call(e,"string");if("object"!=n(t))return t;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==n(r)?r:r+""}(r))in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function u(e){return i({wireframe:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:.5},lineDrawing:{color:"#000000",opacity:1,depthFailColor:"#000000",depthFailOpacity:.4,width:3,dashLength:8},line:{color:"#ffcc33",opacity:1,depthFailColor:"#ffcc33",depthFailOpacity:.4,width:2},areaDrawing:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},area:{color:"#ffffff",opacity:.5,depthFailColor:"#ffffff",depthFailOpacity:.25},cursor:{color:"#ff0000",width:2,radius:4},coordinatesNode:{color:"#333333",width:2,radius:5}},e)}t.d(r,{E4:()=>u,cC:()=>c,r2:()=>s});var l=function(e){var r;return null==e||null===(r=e.geometry)||void 0===r?void 0:r.type},c=function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).getGeometryType,r=void 0===e?l:e;return function(e){return i(i({},null==e?void 0:e.properties),{},{geometryType:r(e)})}},s=function(e,r){return i(i({},null==r?void 0:r.properties),void 0!==(null==e?void 0:e.radius)&&{radius:e.radius})}}}]);